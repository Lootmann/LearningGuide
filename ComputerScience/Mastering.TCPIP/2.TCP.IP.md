# TCP/IP 基礎知識

- Packet Network
  インターネットの起源 = ARPANET
  データ自体を分割する = 一つのデータを複数のPacketにして分割して送信
  分断耐性が強いネットワーク

- Protocol
  通信をするための決まりごと
  インターネットの通信はビット列(0, 1)のみで通信を行うので
  どういうビット列が来たらどういう情報であるのかを定義したもの
  (= Protocol) をお互いに知った上で通信を行う

- TCP/IP
  インターネットを構築する上で必要不可欠なプロトコルはたくさんある
  IP, ICMP, TCP, UDP, HTTP, など何十個もある
  その中で中心的なプロトコルを代表してTCP/IPと読んでいる
  別名、インターネットプロトコルスイットと呼ぶことはある


- RFC: Request For Comments
  IETF: Internet Engineering Task Forceという組織での議論して決める
  標準化しようとするプロトコルは RFC と呼ばれるドキュメントになる
  RFC も腐るほどある
  RFC自体はどんな人でも提案ができる
  良い感じになった提案が散々議論され、実装されて、広く運用されるようになった
  後にいろいろあってドラフト標準になって標準化に至る
  実際に運用実績を世界的に広まっていないと行けないので大変に厳しい道


- TCP/IP の階層モデル
  山ほどある
  - 5. Application Layer
    - WWW, SMTP, FTP, TELNET, SSH, SNMP
  - 4. Transport Layer
    - TCP, UDP
  - 3. Internet Layer
    - IP, ICMP, ARP
  - 2. Network Interface Layer
  - 1. Hardware Layer


- Packet Header
  各Layerを通るたびに必要なHeaderをDataにつけて
  最終的に送信するパケットを作る

  | Ethernet | IP | TCP | Data |
             | IP | TCP | Data |
                  | TCP | Data |
                        | Data |


- DataLink 層
  - MAC Address
    データリンクに接続しているノードを識別するために利用されるアドレス
    48ビットで構成されており
       1, 2: 先頭 はマルチキャストアドレス、ローカルアドレス 
     3 - 24: ベンダ識別子(NICの製造メーカごとに特定の数字が割当)
    25 - 48: ベンダ内での識別子(会社ごとに適当に設定される)

  - Ethernet
    データリンクで最も利用されるProtocol
    MACアドレスを使ってパケットのやり取りをするProtocol

  - 専用回線
    - VPN
      - IP-VPN
        インターネット上でVPNを構築する
      - 広域Ethernet
        通信事業者が提供する、離れた地域を結ぶEthernet接続のサービス
        IP-VPNがIP層での接続サービスであるのに対して
        広域イーサネットはデータリンク層を利用したVLAN
      - SD-WAN サービス
        仮想的なWANリンクを構成するサービス
        倫理ネットワークを構成することができる

- IP 層
  - IP: Internet Protocol
    終点ノード間の通信を実現する ネットワーク層のアドレス
    IPアドレス 32ビットの整数値で表される

    - IPアドレスのクラス
      クラスA、B、C、D 4つのクラスに分類する方法
      現在は利用されていない（物凄いムダが多い）

      - A
        0ビットで始まる
        0.0.0.0 ~ 127.255.255.255
      - B
        10ビットで始まる
        128.0.0.0 ~ 191.255.255.255
      - C
        110ビットで始まる
        192.0.0.0 ~ 223.255.255.255
      - D
        1110ビットで始まる
        224.0.0.0 ~ 239.255.255.255

    - 経路制御
      宛先IPアドレスのホストまでパケットを届けるための仕組み
    - 経路制御表 Routing Table
      IPアドレスを送りたい場所へ送るための（ルーターのメモリ上にある）表

    - サブネットマスク
      クラスには無駄が多い クラスAだと1つのリンク層に6万5千台もの端末を
      接続することができる 現実的なネットワーク構成ではない

      そこでこれが考えされた
      サブネットマスクと呼ばれる識別子を導入することで クラスを無視して
      ネットワークを小さく区切るサブネットワークアドレスを利用される

      172.20.100.0/26 -> 先頭の26ビットがネットワークアドレス、残りはホスト部

    - CIDR, VLSM
      CIDR: Classless InterDomain Routing
      クラスに縛られない組織間の経路制御
      経路情報を集約し圧縮することが可能

  - ICMP: Internet Control Message Protocol
